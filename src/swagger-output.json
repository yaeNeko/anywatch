{
  "swagger": "2.0",
  "info": {
    "title": "Anywatch API",
    "description": "API permettant la gestion des utilisateurs, des watchlists et des séries/animés.",
    "version": "1.0.0"
  },
  "host": "localhost:4000",
  "basePath": "/",
  "schemes": [
    "http"
  ],
  "paths": {
    "/register": {
      "post": {
        "description": "Inscription d'un nouvel utilisateur avec un nom d'utilisateur, un email et un mot de passe.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "username": {
                  "example": "john_doe"
                },
                "email": {
                  "example": "john@example.com"
                },
                "password": {
                  "example": "password123"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Utilisateur créé avec succès"
          },
          "400": {
            "description": "Données manquantes ou utilisateur déjà existant"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/login": {
      "post": {
        "description": "Authentification d'un utilisateur avec un email et un mot de passe pour obtenir un token JWT.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "email": {
                  "example": "john@example.com"
                },
                "password": {
                  "example": "password123"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Authentification réussie, token JWT retourné"
          },
          "400": {
            "description": "Email ou mot de passe incorrect"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/": {
      "post": {
        "description": "Ajouter un commentaire ou une note pour un anime dans la base de données.",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "serie_anime_id": {
                  "example": "4"
                },
                "note": {
                  "example": "5"
                },
                "commentaire": {
                  "example": "Super anime !"
                },
                "pseudo_anonyme": {
                  "example": "true"
                },
                "type": {
                  "example": "animé"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Commentaire ajouté avec succès"
          },
          "400": {
            "description": "Données manquantes ou invalides"
          },
          "401": {
            "description": "Utilisateur non authentifié"
          },
          "403": {
            "description": "Accès interdit"
          },
          "404": {
            "description": "Anime non trouvé"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/{serie_anime_id}": {
      "get": {
        "description": "Obtenir les détails d'un anime à partir de son ID.",
        "parameters": [
          {
            "name": "serie_anime_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Détails de l'anime récupérés avec succès"
          },
          "404": {
            "description": "Anime non trouvé"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/{utilisateur_id}/{serie_anime_id}": {
      "patch": {
        "description": "Mettre à jour la note et le commentaire d'un utilisateur pour une série/animé donné.",
        "parameters": [
          {
            "name": "utilisateur_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "serie_anime_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "note": {
                  "example": "4"
                },
                "commentaire": {
                  "example": "Bien mais peut être amélioré"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Note et commentaire mis à jour avec succès"
          },
          "403": {
            "description": "Accès interdit"
          },
          "404": {
            "description": "Anime ou utilisateur non trouvé"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/subscriptions": {
      "get": {
        "description": "Obtenir la liste des abonnements de l'utilisateur.",
        "responses": {
          "200": {
            "description": "Liste des abonnements récupérée avec succès"
          },
          "404": {
            "description": "Abonnements non trouvés"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/{id}": {
      "get": {
        "description": "Obtenir les informations d'un utilisateur à partir de son ID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Informations de l'utilisateur récupérées avec succès"
          },
          "401": {
            "description": "Utilisateur non authentifié"
          },
          "403": {
            "description": "Accès interdit"
          },
          "404": {
            "description": "Utilisateur non trouvé"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/visibility/{id}": {
      "patch": {
        "description": "Mettre à jour la visibilité d'un utilisateur.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "est_public": {
                  "example": "true"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Visibilité mise à jour avec succès"
          },
          "404": {
            "description": "Utilisateur non trouvé"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/modification/{id}": {
      "put": {
        "description": "Modifier les informations d'un utilisateur, y compris le pseudo, l'email et le mot de passe.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "pseudo": {
                  "example": "john_doe_updated"
                },
                "email": {
                  "example": "newemail@example.com"
                },
                "mot_de_passe": {
                  "example": "newpassword123"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Informations mises à jour avec succès"
          },
          "404": {
            "description": "Utilisateur non trouvé"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/supprimer/{userId}": {
      "delete": {
        "description": "Supprimer un utilisateur à partir de son ID.",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Utilisateur supprimé avec succès"
          },
          "404": {
            "description": "Utilisateur non trouvé"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/series/top": {
      "get": {
        "description": "Obtenir la liste des séries animées les mieux notées.",
        "responses": {
          "200": {
            "description": "Liste des séries animées obtenue avec succès"
          },
          "404": {
            "description": "Aucune série animée trouvée"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/user/{userId}": {
      "get": {
        "description": "Obtenir les informations d'un utilisateur spécifique.",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Informations de l'utilisateur récupérées avec succès"
          },
          "401": {
            "description": "Utilisateur non authentifié"
          },
          "403": {
            "description": "Accès interdit"
          },
          "404": {
            "description": "Utilisateur non trouvé"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/{watchlistId}/series": {
      "get": {
        "description": "Obtenir la liste des séries animées dans la watchlist d'un utilisateur.",
        "parameters": [
          {
            "name": "watchlistId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Liste des séries animées de la watchlist obtenue avec succès"
          },
          "401": {
            "description": "Utilisateur non authentifié"
          },
          "403": {
            "description": "Accès interdit"
          },
          "404": {
            "description": "Watchlist non trouvée"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/creer": {
      "post": {
        "description": "Créer une nouvelle watchlist pour l'utilisateur authentifié.",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "type": "string",
            "description": "Token d'authentification JWT de l'utilisateur"
          }
        ],
        "responses": {
          "201": {
            "description": "Watchlist créée avec succès"
          },
          "401": {
            "description": "Non autorisé, utilisateur non authentifié"
          },
          "403": {
            "description": "Accès interdit, l'utilisateur ne dispose pas des droits nécessaires"
          }
        }
      }
    },
    "/ajouter/{watchlistId}/{serieAnimeId}": {
      "post": {
        "description": "Ajouter un anime à la watchlist d'un utilisateur.",
        "parameters": [
          {
            "name": "watchlistId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "L'ID de la watchlist à laquelle ajouter l'anime"
          },
          {
            "name": "serieAnimeId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "L'ID de l'anime à ajouter à la watchlist"
          },
          {
            "name": "authorization",
            "in": "header",
            "type": "string",
            "description": "Token d'authentification JWT de l'utilisateur"
          }
        ],
        "responses": {
          "200": {
            "description": "Anime ajouté à la watchlist avec succès"
          },
          "400": {
            "description": "Requête incorrecte, paramètre manquant ou invalide"
          },
          "401": {
            "description": "Non autorisé, utilisateur non authentifié"
          },
          "403": {
            "description": "Accès interdit, l'utilisateur ne dispose pas des droits nécessaires"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/statut/{watchlistId}/{serieAnimeId}": {
      "patch": {
        "description": "Mettre à jour le statut d'un anime dans une watchlist.",
        "parameters": [
          {
            "name": "watchlistId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "L'ID de la watchlist contenant l'anime"
          },
          {
            "name": "serieAnimeId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "L'ID de l'anime dont le statut doit être mis à jour"
          },
          {
            "name": "authorization",
            "in": "header",
            "type": "string",
            "description": "Token d'authentification JWT de l'utilisateur"
          },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "statut": {
                  "example": "1",
                  "description": "Statut de l'anime dans la watchlist (1:Pas commencé, 2:En cours, 3:En pause, 4:Terminé, 5:Abandonné, 6:En attente de nouveaux épisodes)"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Statut mis à jour avec succès"
          },
          "400": {
            "description": "Requête incorrecte, statut invalide"
          },
          "401": {
            "description": "Non autorisé, utilisateur non authentifié"
          },
          "403": {
            "description": "Accès interdit, l'utilisateur ne dispose pas des droits nécessaires"
          },
          "404": {
            "description": "Watchlist ou anime non trouvé"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/supprimer/{watchlistId}/{serieAnimeId}": {
      "delete": {
        "description": "Supprimer un anime d'une watchlist.",
        "parameters": [
          {
            "name": "watchlistId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "L'ID de la watchlist dont l'anime doit être supprimé"
          },
          {
            "name": "serieAnimeId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "L'ID de l'anime à supprimer"
          },
          {
            "name": "authorization",
            "in": "header",
            "type": "string",
            "description": "Token d'authentification JWT de l'utilisateur"
          }
        ],
        "responses": {
          "200": {
            "description": "Anime supprimé de la watchlist avec succès"
          },
          "400": {
            "description": "Requête incorrecte, paramètre manquant ou invalide"
          },
          "401": {
            "description": "Non autorisé, utilisateur non authentifié"
          },
          "403": {
            "description": "Accès interdit, l'utilisateur ne dispose pas des droits nécessaires"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    },
    "/supprimer/{watchlistId}": {
      "delete": {
        "description": "Supprimer une watchlist entière.",
        "parameters": [
          {
            "name": "watchlistId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "L'ID de la watchlist à supprimer"
          },
          {
            "name": "authorization",
            "in": "header",
            "type": "string",
            "description": "Token d'authentification JWT de l'utilisateur"
          }
        ],
        "responses": {
          "200": {
            "description": "Watchlist supprimée avec succès"
          },
          "400": {
            "description": "Requête incorrecte, paramètre manquant ou invalide"
          },
          "401": {
            "description": "Non autorisé, utilisateur non authentifié"
          },
          "403": {
            "description": "Accès interdit, l'utilisateur ne dispose pas des droits nécessaires"
          },
          "404": {
            "description": "Watchlist non trouvée"
          },
          "500": {
            "description": "Erreur interne du serveur"
          }
        }
      }
    }
  }
}